# データベース設計ガイド：スキーマ設計にLLMを使用する

このガイドでは、AIが生成した提案の不確実性と制限を考慮しながら、大規模言語モデル（LLM）を使用してデータベーススキーマを設計するプロセスを説明します。

## ステップ1：要件を理解する

設計プロセスを開始する前に、`docs/requirements.md`ファイルを徹底的に確認し、音楽アプリのニーズを理解します。

## ステップ2：初期スキーマ設計

1. LLM（ChatGPTなど）を使用して、要件に基づいて初期スキーマ設計を生成します。
2. プロンプト：「アーティストと曲の情報を保存する必要がある音楽アプリについて、Prismaスキーマ設計を提案してください。」

## ステップ3：批判的評価

LLMが生成したスキーマを評価します：
- 要件からのすべての必須フィールドがカバーされていますか？
- エンティティ間の関係（例：アーティストと曲）が正しく表現されていますか？
- 各フィールドのデータ型は適切ですか？
- LLMがプロジェクトの要件と一致しない可能性のある仮定を行っていませんか？

## ステップ4：反復的な改良

1. 評価に基づいて、LLMにスキーマの改良を依頼します。
2. 例のプロンプト：「現在のスキーマにXが欠けています。Yを考慮しながら、これを含めるように更新できますか？」
3. 各反復について批判的評価プロセスを繰り返します。

## ステップ5：エッジケースを考慮する

1. 現在のスキーマが対応していない可能性のあるエッジケースや将来の要件について考えます。
2. これらのシナリオについてLLMに尋ねます。例：「このスキーマで1つの曲に複数のアーティストがいる場合をどのように処理しますか？」

## ステップ6：パフォーマンスの考慮事項

1. スキーマ設計の潜在的なパフォーマンスへの影響についてLLMと議論します。
2. 例のプロンプト：「このスキーマにとってどのようなインデックスが有益で、その理由は何ですか？」

## ステップ7：マイグレーション計画

1. スキーマに満足したら、LLMを使用してマイグレーションプロセスの計画を立てます。
2. プロンプト：「この最終的なスキーマに基づいて、これらのテーブルを作成するPrismaマイグレーションスクリプトを生成してください。」

## ステップ8：ドキュメンテーション

1. LLMを使用してスキーマのドキュメントを生成する手助けを得ます。
2. プロンプト：「スキーマの各テーブルとフィールドの簡単な説明を提供してください。」

注意：LLMはアイデアやコードスニペットを生成するための強力なツールですが、間違いを犯したり、古い情報を持っている可能性があります。常に出力を検証し、データベース設計に関する最終決定を下す際には自分の判断を使用してください。

## 最終ステップ：実装

スキーマ設計に自信を持ったら、`prisma/schema.prisma`ファイルに実装します。変更をデータベースに適用するために必要なPrismaコマンドを実行することを忘れないでください。
