# 1. 背景と目的

- このアプリケーションは、管理者が空想のアーティストと楽曲を手動で追加し、公開・共有できるWebサイトを提供します。
- 対象ユーザーは、新しい音楽との出会いを求める音楽ファンです。

---

# 2. 機能要件

## 2.1 管理画面ログイン機能
- **機能概要**：管理者がシークレットキーの完全一致で管理画面にログインします。

## 2.2 アーティスト追加機能
- **機能概要**：管理者がアーティスト名、プロフィール、画像などを手動で追加します。

## 2.3 アーティスト編集・削除機能
- **機能概要**：管理者が既存のアーティスト情報を編集または削除します。

## 2.4 曲の追加機能
- **機能概要**：管理者がアーティストに紐づく曲を手動で追加します。

## 2.5 曲の編集・削除機能
- **機能概要**：管理者が既存の曲情報を編集または削除します。

## 2.6 曲の再生機能
- **機能概要**：ユーザーが公開された曲を再生し、基本的な音楽プレイヤー機能を提供します。
- **再生ウィジェット**：管理画面以外の全ページで常に表示され、再生状態を維持します。

## 2.7 お気に入り機能
- **機能概要**：ユーザーが曲をお気に入りに追加し、ブラウザのローカルストレージに保存します。データベースには保存しません。

## 2.8 ユーザー操作に対するフィードバック
- **機能概要**：ユーザー操作に応じて適切なフィードバックを提供します。

---

# 3. 非機能要件

- **対応デバイス**：PCのみ対応（最新のデスクトップWebブラウザ）
- **ログイン機能**：ユーザーのログイン機能は不要
- **UIデザイン**：Tailwind CSSを活用して、直感的でわかりやすく、一貫性のあるデザインを目指します
  - 色、フォント、ボタンスタイルの統一
  - 視覚的な階層構造の明確化
- **共通UI要素**：
  - **ヘッダー**
    - ロゴ
    - グローバルナビゲーションメニュー（ホーム、アーティスト一覧、曲一覧、お気に入りなど）
  - **曲カード**(曲ページへのリンク)
    - アルバムアート
    - 曲名
    - 再生ボタン(再生が開始される)
    - アーティスト名(アーティストページへのリンク)
  - **アーティストカード**(アーティストページへのリンク)
    - アーティスト画像
    - アーティスト名
- **アクセシビリティ要件**：
  - キーボード操作への対応

---

# 4. 制約事項

- **フロントエンド**：HTML5, CSS3, JavaScript, SvelteKit
- **バックエンド**：SvelteKit (Bun)
- **データベース**：SQLite
- **ORM**：Prisma
- **開発環境**：ローカル環境で動作
- **セキュリティ対策**：本アプリケーションは書籍で利用するサンプルアプリケーションであるため、利用するライブラリで常識的に対応できる範囲以上のセキュリティ対策は行わない。

---

# 5. ユースケース

## 5.1 管理者が管理画面にログインし、新しいアーティストを追加する
- **操作手順**：
  1. シークレットキーを入力し、ログインボタンをクリック
  2. 管理ダッシュボードで「アーティスト追加」ボタンをクリック
  3. アーティスト情報を入力し、「保存」ボタンをクリック
- **フィードバック**：
  - ログイン失敗時にエラーメッセージを表示
  - 保存成功時に「アーティストが追加されました」という通知を表示

## 5.2 管理者が既存のアーティストに新しい曲を追加する
- **操作手順**：
  1. 管理ダッシュボードで対象のアーティストを選択
  2. 「曲追加」ボタンをクリック
  3. 曲情報を入力し、「保存」ボタンをクリック
- **フィードバック**：
  - 入力エラー時にエラーメッセージを表示
  - 保存成功時に「曲が追加されました」という通知を表示

## 5.3 管理者が既存のアーティストや曲を編集・削除する
- **操作手順**：
  1. アーティストまたは曲一覧から対象を選択
  2. 「編集」または「削除」ボタンをクリック
  3. 編集の場合は情報を更新し、「保存」ボタンをクリック
  4. 削除の場合は確認ダイアログで「削除」ボタンをクリック
- **フィードバック**：
  - 更新成功時に「情報が更新されました」という通知を表示
  - 削除成功時に「削除されました」という通知を表示

## 5.4 ユーザーがWebサイトで新しい音楽を発見し、曲を再生する
- **操作手順**：
  1. トップページで興味のある曲の「再生」ボタンをクリック
  2. 再生ウィジェットで再生・一時停止・シークバー操作を行う
- **フィードバック**：
  - 再生開始時に再生ウィジェットに曲情報を表示
  - ページ遷移しても再生が継続し、ウィジェットが表示され続ける

## 5.5 ユーザーが気に入った曲をお気に入りに追加し、後で再生する
- **操作手順**：
  1. 曲の「お気に入りに追加」ボタンをクリック
  2. お気に入りページで曲を選択し、再生ボタンをクリック
- **フィードバック**：
  - 追加成功時に「お気に入りに追加されました」という通知を表示
  - お気に入りから曲を削除する際に確認メッセージを表示

---

# 6. 必要ページ一覧（共通要素を含む）

## 6.1 ユーザー向けページ

### 6.1.1 トップページ

- **概要**：曲やアーティストを表示が可能
- **共通UI要素**：
  - **ヘッダー**
    - ロゴ
    - グローバルナビゲーションメニュー（ホーム、アーティスト一覧、曲一覧、お気に入りなど）
  - **再生ウィジェット**（管理画面以外の全ページで表示）
- **主要なUIコンポーネント**：
  - **曲・アーティストのカード表示**
    - 画像
    - 名前
    - 再生ボタン
    - お気に入り追加ボタン

### 6.1.2 アーティスト詳細ページ

- **概要**：アーティストの情報や曲一覧を表示し、再生が可能
- **共通UI要素**：
  - **ヘッダー**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **アーティスト情報セクション**
    - 画像
    - 名前
    - プロフィール
  - **曲一覧**
    - 曲名
    - 再生ボタン
    - お気に入り追加ボタン

### 6.1.3 曲詳細ページ

- **概要**：曲の詳細情報を表示し、再生・お気に入り追加機能を提供
- **共通UI要素**：
  - **ヘッダー**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **曲情報セクション**
    - 曲名
    - アーティスト名
    - アルバムアート
    - 説明
  - **再生ボタン**
  - **お気に入り追加ボタン**

### 6.1.4 お気に入りページ

- **概要**：ユーザーのお気に入り曲を表示し、管理・再生が可能
- **共通UI要素**：
  - **ヘッダー**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **お気に入り曲一覧**
    - 曲名
    - アーティスト名
    - 再生ボタン
    - 削除ボタン

### 6.1.5 アーティスト一覧ページ

- **概要**：アーティストの一覧を表示し、詳細ページへリンク
- **共通UI要素**：
  - **ヘッダー**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **アーティストカード**
    - 画像
    - 名前
    - 詳細ページリンク

### 6.1.6 曲の一覧ページ

- **概要**：公開されている曲の一覧を表示し、詳細ページへリンク
- **共通UI要素**：
  - **ヘッダー**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **曲カード**
    - アルバムアート
    - 曲名
    - アーティスト名
    - 再生ボタン
    - お気に入り追加ボタン

## 6.2 管理者向けページ

### 6.2.1 管理者ログインページ

- **概要**：シークレットキーを入力して管理画面にログインします。
- **共通UI要素**：
  - **ヘッダー**
    - ロゴ
- **主要なUIコンポーネント**：
  - **シークレットキー入力フィールド**：セキュアなパスワード入力フィールド。
  - **ログインボタン**：クリックして認証を行います。
  - **エラーメッセージ表示エリア**：認証失敗時にエラーを表示。

### 6.2.2 管理ダッシュボード

- **概要**：アーティストと曲のデータを一元管理できる管理者専用のダッシュボードです。新規追加、編集、削除などの操作が可能です。
- **共通UI要素**：
  - **ヘッダー**
    - ロゴ
    - ナビゲーションメニュー（ダッシュボード、アーティスト管理、曲管理、設定など）
- **主要なページとUIコンポーネント**：

#### アーティスト管理ページ

- **概要**：アーティストの一覧表示や詳細情報の管理を行います。
- **UIコンポーネント**：
  - **アーティスト一覧テーブル**：
    - アーティスト名
    - 登録日
    - 関連曲数
    - 編集ボタン
    - 削除ボタン
  - **新規アーティスト追加ボタン**

#### 新規アーティスト追加・編集ページ

- **概要**：アーティストの新規登録や既存情報の編集を行います。
- **UIコンポーネント**：
  - **入力フォームフィールド**：
    - アーティスト名
    - プロフィール
    - 画像アップロード
  - **保存ボタン**
  - **キャンセルボタン**
  - **入力エラーメッセージ**

#### 曲管理ページ

- **概要**：曲の一覧表示や詳細情報の管理を行います。
- **UIコンポーネント**：
  - **曲一覧テーブル**：
    - 曲名
    - アーティスト名
    - 登録日
    - 編集ボタン
    - 削除ボタン
  - **新規曲追加ボタン**

#### 新規曲追加・編集ページ

- **概要**：曲の新規登録や既存情報の編集を行います。
- **UIコンポーネント**：
  - **入力フォームフィールド**：
    - 曲名
    - アーティスト選択
    - 説明
    - 音源ファイルアップロード
    - アルバムアートアップロード
  - **保存ボタン**
  - **キャンセルボタン**
  - **入力エラーメッセージ**

#### 確認ダイアログ

- **概要**：削除や重大な変更を行う際の最終確認をします。
- **UIコンポーネント**：
  - **メッセージ表示エリア**
  - **確認ボタン**
  - **キャンセルボタン**

#### フィードバックメッセージ表示エリア

- **概要**：操作結果の成功・失敗をユーザーに通知します。
- **UIコンポーネント**：
  - **トースト通知**
  - **エラーメッセージ**

---
