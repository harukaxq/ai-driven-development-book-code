# 1. 背景と目的

- **音楽生成AI**の進化により、技術的なスキルがなくても高品質な楽曲を作成できるようになりました。
- このアプリケーションは、管理者が空想のアーティストと楽曲を手動で追加し、公開・共有できるWebサイトを提供します。
- 対象ユーザーは、新しい音楽との出会いを求める音楽ファンです。

---

# 2. 機能要件

## 2.1 管理画面ログイン機能
- **機能概要**：管理者がシークレットキーの完全一致で管理画面にログインします。

## 2.2 アーティスト追加機能
- **機能概要**：管理者がアーティスト名、プロフィール、ジャンル、画像などを手動で追加します。

## 2.3 アーティスト編集・削除機能
- **機能概要**：管理者が既存のアーティスト情報を編集または削除します。

## 2.4 曲の追加機能
- **機能概要**：管理者がアーティストに紐づく曲を手動で追加します。
- **公開設定機能**：曲ごとに公開・非公開の設定が可能です。

## 2.5 曲の編集・削除機能
- **機能概要**：管理者が既存の曲情報を編集または削除します。

## 2.6 曲の公開・共有機能
- **機能概要**：公開された曲をWebサイト上で共有し、SNSシェア機能を提供します。

## 2.7 曲の再生機能
- **機能概要**：ユーザーが公開された曲を再生し、基本的な音楽プレイヤー機能を提供します。
- **再生ウィジェット**：管理画面以外の全ページで常に表示され、再生状態を維持します。

## 2.8 プレイリスト機能
- **機能概要**：ユーザーが曲をプレイリストに追加し、ブラウザのローカルストレージに保存しデータベースに保存しない。

### 主要なUIコンポーネント

- **プレイリスト追加ボタン**（各曲に配置）
- **プレイリストページ**
  - 曲一覧表示
  - 曲削除ボタン
- **プレイリスト全体再生ボタン**

## 2.9 アーティスト・曲の検索機能

- **機能概要**：キーワードやジャンルでアーティストや曲を検索します。

### 主要なUIコンポーネント

- **検索バー**（ヘッダーに配置）
- **ジャンルフィルター**（ドロップダウンまたはタグ形式）
- **検索結果表示エリア**
- **ページネーションコントロール**

## 2.10 ユーザー操作に対するフィードバック

- **機能概要**：ユーザー操作に応じて適切なフィードバックを提供します。

### 主要なUIコンポーネント

- **ボタンのホバー・クリック時のアニメーション**
- **ロード中のインジケーター**（スピナー、プログレスバー）
- **成功・エラーメッセージ表示**（トースト通知、モーダル）

---

# 3. 非機能要件

- **対応デバイス**：PCのみ対応（最新のデスクトップWebブラウザ）
- **ログイン機能**：ユーザーのログイン機能は不要
- **UIデザイン**：Tailwind CSSを活用して、直感的でわかりやすく、一貫性のあるデザインを目指します
  - 色、フォント、ボタンスタイルの統一
  - 視覚的な階層構造の明確化
- **共通UI要素**：
  - **ヘッダー**
    - ロゴ
    - グローバルナビゲーションメニュー（ホーム、アーティスト一覧、曲一覧、プレイリストなど）
    - 検索バー
  - **フッター**
    - コピーライト情報
    - SNSリンク
    - 問い合わせ先
- **アクセシビリティ要件**：
  - 高コントラストモード対応
  - キーボード操作への対応
  - フォーカスインジケーターの表示
  - 画像の代替テキスト設定

---

# 4. 制約事項

- **フロントエンド**：HTML5, CSS3, JavaScript, SvelteKit
- **バックエンド**：SvelteKit (Bun)
- **データベース**：SQLite
- **ORM**：Prisma
- **音楽生成AI**：Suno.ai を使用
- **画像生成AI**：Stable Diffusion を使用
- **開発環境**：ローカル環境で動作
- **セキュリティ対策**：本アプリケーションは書籍で利用するサンプルアプリケーションであるため、利用するライブラリで常識的に対応できる範囲以上のセキュリティ対策は行いません。SQLインジェクション対策などの基本的なセキュリティ対策のみを講じます。

---

# 5. ユースケース

## 5.1 管理者が管理画面にログインし、新しいアーティストを追加する
- **操作手順**：
  1. シークレットキーを入力し、ログインボタンをクリック
  2. 管理ダッシュボードで「アーティスト追加」ボタンをクリック
  3. アーティスト情報を入力し、「保存」ボタンをクリック
- **フィードバック**：
  - ログイン失敗時にエラーメッセージを表示
  - 保存成功時に「アーティストが追加されました」という通知を表示

## 5.2 管理者が既存のアーティストに新しい曲を追加する
- **操作手順**：
  1. 管理ダッシュボードで対象のアーティストを選択
  2. 「曲追加」ボタンをクリック
  3. 曲情報を入力し、公開設定を行い、「保存」ボタンをクリック
- **フィードバック**：
  - 入力エラー時にエラーメッセージを表示
  - 保存成功時に「曲が追加されました」という通知を表示

## 5.3 管理者が既存のアーティストや曲を編集・削除する
- **操作手順**：
  1. アーティストまたは曲一覧から対象を選択
  2. 「編集」または「削除」ボタンをクリック
  3. 編集の場合は情報を更新し、「保存」ボタンをクリック
  4. 削除の場合は確認ダイアログで「削除」ボタンをクリック
- **フィードバック**：
  - 更新成功時に「情報が更新されました」という通知を表示
  - 削除成功時に「削除されました」という通知を表示

## 5.4 ユーザーがWebサイトで新しい音楽を発見し、曲を再生する
- **操作手順**：
  1. トップページで興味のある曲の「再生」ボタンをクリック
  2. 再生ウィジェットで再生・一時停止・シークバー操作を行う
- **フィードバック**：
  - 再生開始時に再生ウィジェットに曲情報を表示
  - ページ遷移しても再生が継続し、ウィジェットが表示され続ける

## 5.5 ユーザーがキーワードやジャンルでアーティストや曲を検索する
- **操作手順**：
  1. ヘッダーの検索バーにキーワードを入力し、検索
  2. ジャンルフィルターを選択して結果を絞り込む
- **フィードバック**：
  - 検索結果がリアルタイムで更新
  - 結果が見つからない場合は「該当する結果がありません」と表示

## 5.6 ユーザーが気に入った曲をプレイリストに追加し、後で再生する
- **操作手順**：
  1. 曲の「プレイリストに追加」ボタンをクリック
  2. プレイリストページで曲を選択し、再生ボタンをクリック
- **フィードバック**：
  - 追加成功時に「プレイリストに追加されました」という通知を表示
  - プレイリストから曲を削除する際に確認メッセージを表示

## 5.7 ユーザーがSNSで曲をシェアする
- **操作手順**：
  1. 曲詳細ページで「シェア」ボタンをクリック
  2. SNSアイコンを選択し、共有先を決定
- **フィードバック**：
  - シェア成功時に「共有リンクがコピーされました」というメッセージを表示

---

# 6. 必要ページ一覧（共通要素を含む）

## 6.1 ユーザー向けページ

### 6.1.1 トップページ

- **概要**：おすすめの曲やアーティストを表示し、検索・フィルタリングが可能
- **共通UI要素**：
  - **ヘッダー**
    - ロゴ
    - グローバルナビゲーションメニュー（ホーム、アーティスト一覧、曲一覧、プレイリストなど）
    - 検索バー
  - **フッター**
    - コピーライト情報
    - SNSリンク
    - 問い合わせ先
  - **再生ウィジェット**（管理画面以外の全ページで表示）
- **主要なUIコンポーネント**：
  - **ヒーローバナー**（最新のおすすめ曲・アーティスト）
  - **曲・アーティストのカード表示**
    - 画像
    - 名前
    - 再生ボタン
    - プレイリスト追加ボタン
  - **ジャンルフィルター**
  - **ページネーションコントロール**

### 6.1.2 アーティスト詳細ページ

- **概要**：アーティストの情報や曲一覧を表示し、再生が可能
- **共通UI要素**：
  - **ヘッダー**
  - **フッター**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **アーティスト情報セクション**
    - 画像
    - 名前
    - プロフィール
  - **曲一覧**
    - 曲名
    - 再生ボタン
    - プレイリスト追加ボタン

### 6.1.3 曲詳細ページ

- **概要**：曲の詳細情報を表示し、再生・プレイリスト追加・シェア機能を提供
- **共通UI要素**：
  - **ヘッダー**
  - **フッター**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **曲情報セクション**
    - 曲名
    - アーティスト名
    - アルバムアート
    - 説明
  - **再生ボタン**
  - **プレイリスト追加ボタン**
  - **シェアボタン**

### 6.1.4 プレイリストページ

- **概要**：ユーザーのプレイリストを表示し、管理・再生が可能
- **共通UI要素**：
  - **ヘッダー**
  - **フッター**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **プレイリスト曲一覧**
    - 曲名
    - アーティスト名
    - 再生ボタン
    - 削除ボタン
  - **プレイリスト全体再生ボタン**

### 6.1.5 アーティスト一覧ページ

- **概要**：アーティストの一覧を表示し、詳細ページへリンク
- **共通UI要素**：
  - **ヘッダー**
  - **フッター**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **アーティストカード**
    - 画像
    - 名前
    - ジャンル
    - 詳細ページリンク
  - **ジャンルフィルター**
  - **ページネーションコントロール**

### 6.1.6 曲の一覧ページ

- **概要**：公開されている曲の一覧を表示し、詳細ページへリンク
- **共通UI要素**：
  - **ヘッダー**
  - **フッター**
  - **再生ウィジェット**
- **主要なUIコンポーネント**：
  - **曲カード**
    - アルバムアート
    - 曲名
    - アーティスト名
    - 再生ボタン
    - プレイリスト追加ボタン
  - **ジャンルフィルター**
  - **ページネーションコントロール**

### 6.1.7 エラーページ

- **概要**：エラー時やページが見つからない場合に表示
- **共通UI要素**：
  - **ヘッダー**
  - **フッター**
- **主要なUIコンポーネント**：
  - **エラーメッセージ表示エリア**（例：「404 ページが見つかりません」）
  - **ホームページへのリンクボタン**

## 6.2 管理者向けページ

### 6.2.1 管理者ログインページ

- **概要**：シークレットキーを入力して管理画面にログインします。
- **共通UI要素**：
  - **ヘッダー**
    - ロゴ
- **主要なUIコンポーネント**：
  - **シークレットキー入力フィールド**：セキュアなパスワード入力フィールド。
  - **ログインボタン**：クリックして認証を行います。
  - **エラーメッセージ表示エリア**：認証失敗時にエラーを表示。

### 6.2.2 管理ダッシュボード

- **概要**：アーティストと曲のデータを一元管理できる管理者専用のダッシュボードです。新規追加、編集、削除、公開設定などの操作が可能です。
- **共通UI要素**：
  - **ヘッダー**
    - ロゴ
    - ナビゲーションメニュー（ダッシュボード、アーティスト管理、曲管理、設定など）
  - **フッター**
    - コピーライト情報
- **主要なページとUIコンポーネント**：

#### ダッシュボードホーム

- **概要**：管理者が全体の状況を一目で把握できるホーム画面。
- **共通UI要素**：
  - **サイドバー**（必要に応じて）
- **UIコンポーネント**：
  - **統計情報パネル**：登録されているアーティスト数、曲数、公開中の曲数などを表示。
  - **最新アクティビティフィード**：最近の追加・編集・削除履歴を一覧表示。
  - **クイックアクセスボタン**：新規アーティスト追加、新規曲追加へのショートカット。

#### アーティスト管理ページ

- **概要**：アーティストの一覧表示や詳細情報の管理を行います。
- **共通UI要素**：
  - **ヘッダー**
  - **サイドバー**
  - **フッター**
- **UIコンポーネント**：
  - **アーティスト一覧テーブル**：
    - アーティスト名
    - ジャンル
    - 登録日
    - 関連曲数
    - 編集ボタン
    - 削除ボタン
  - **検索バーとフィルター機能**
  - **新規アーティスト追加ボタン**

#### 新規アーティスト追加・編集ページ

- **概要**：アーティストの新規登録や既存情報の編集を行います。
- **共通UI要素**：
  - **ヘッダー**
  - **サイドバー**
  - **フッター**
- **UIコンポーネント**：
  - **入力フォームフィールド**：
    - アーティスト名
    - プロフィール
    - ジャンル
    - 画像アップロード
  - **保存ボタン**
  - **キャンセルボタン**
  - **入力エラーメッセージ**

#### 曲管理ページ

- **概要**：曲の一覧表示や詳細情報の管理を行います。
- **共通UI要素**：
  - **ヘッダー**
  - **サイドバー**
  - **フッター**
- **UIコンポーネント**：
  - **曲一覧テーブル**：
    - 曲名
    - アーティスト名
    - 公開状態
    - 登録日
    - 編集ボタン
    - 削除ボタン
  - **検索バーとフィルター機能**
  - **新規曲追加ボタン**

#### 新規曲追加・編集ページ

- **概要**：曲の新規登録や既存情報の編集を行います。
- **共通UI要素**：
  - **ヘッダー**
  - **サイドバー**
  - **フッター**
- **UIコンポーネント**：
  - **入力フォームフィールド**：
    - 曲名
    - アーティスト選択
    - 説明
    - ジャンル
    - 音源ファイルアップロード
    - アルバムアートアップロード
    - 公開設定
  - **保存ボタン**
  - **キャンセルボタン**
  - **入力エラーメッセージ**

#### 公開設定管理ページ

- **概要**：曲の公開状態を一括で管理します。
- **共通UI要素**：
  - **ヘッダー**
  - **サイドバー**
  - **フッター**
- **UIコンポーネント**：
  - **一括選択チェックボックス**
  - **公開状態一括変更ボタン**
  - **フィルター機能**

#### 確認ダイアログ

- **概要**：削除や重大な変更を行う際の最終確認をします。
- **UIコンポーネント**：
  - **メッセージ表示エリア**
  - **確認ボタン**
  - **キャンセルボタン**

#### システム設定ページ

- **概要**：システム全体の設定を管理します。
- **共通UI要素**：
  - **ヘッダー**
  - **サイドバー**
  - **フッター**
- **UIコンポーネント**：
  - **シークレットキー変更フォーム**
  - **データベースバックアップボタン**
  - **ログアウトボタン**

#### フィードバックメッセージ表示エリア

- **概要**：操作結果の成功・失敗をユーザーに通知します。
- **UIコンポーネント**：
  - **トースト通知**
  - **エラーメッセージ**

#### ナビゲーションと使いやすさの向上

- **共通UI要素**：
  - **固定ヘッダーとサイドバー**
  - **パンくずリスト**
  - **レスポンシブデザイン**

---